<form class="sign-up-step-4 sign-up-step" name="step" novalidate>
  <div class="row">
    <h2 class="columns small-9">
      Create a new account
    </h2>

    <div class="columns small-3" ng-include="'views/sign-up/steps-navigation.html'"></div>
  </div>
  <div class="row" ng-if="isFailed">
    <div class="columns medium-12">
      <div data-alert class="alert-box alert">
        Process order failed, please check your payment information.
      </div>
    </div>
  </div>
  <div class="row title">
    <h6 class="small-12 columns">
      ORDER DETAILS AND PAYMENT
    </h6>
  </div>
  <div class="row">
    <div class="columns small-12">
      <table class="product-table">
        <thead>
        <tr>
          <th>SKU</th>
          <th>Item</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Total Price</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="lineItem in payment['line-items']">
          <td class="text-left">{{lineItem.sku}}</td>
          <td class="text-left">
            <img ng-src="{{lineItem['image-url'] | imageSize:'small' }}" alt="{{lineItem['product-name']}}"/>
            {{lineItem['product-name']}}
          </td>
          <td class="price">£{{lineItem.price | price}}</td>
          <td>
            {{lineItem.quantity}}
          </td>
          <td class="price">£{{lineItem.price * lineItem.quantity | price}}</td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
          <td colspan="4" class="text-right">
            Item Total
          </td>
          <td class="price">
            £{{payment['item-total']}}
          </td>
        </tr>
        <tr ng-repeat="adjustment in payment.adjustments">
          <td colspan="4" class="text-right">
            {{adjustment.label}}
          </td>
          <td class="price">
            £{{adjustment.amount}}
          </td>
        </tr>
        <tr>
          <td colspan="4" class="text-right">
            Order Total
          </td>
          <td class="price">
            £{{payment.total}}
          </td>
        </tr>
        </tfoot>
      </table>
    </div>
  </div>
  <div class="row title">
    <h6 class="small-3 columns">
      PERSONAL WEBSITE
    </h6>
  </div>
  <div class="row">
    <div class="columns small-9">
      <span>
        {{retailUrl}}{{userInfo.login}}
      </span>
    </div>
    <div class="columns small-3 text-right personal-website-info">
      <ul class="medium-font">
        <li>First 30 Days</li>
        <li><b class="important-text">FREE</b></li>
        <li>£15 / <span class="important-text">3 months</span></li>
        <li>After 30 Days</li>
      </ul>
    </div>
  </div>
  <div class="row title">
    <h6 class="small-3 columns">
      SHIPPING ADDRESS
    </h6>
  </div>
  <div class="row">
    <div class="columns small-12">
      <ul class="medium-font">
        <li>{{payment['shipping-address']['first-name']}} {{payment['shipping-address']['last-name']}}</li>
        <li>{{payment['shipping-address']['street']}}</li>
        <li>{{payment['shipping-address']['city']}}, {{payment['shipping-address']['state']}},
          {{payment['shipping-address']['country']}}, {{payment['shipping-address']['zip']}}
        </li>
      </ul>
    </div>
  </div>
  <div class="row title">
    <h6 class="small-3 columns">
      SHIPPING METHOD
    </h6>
  </div>
  <div class="row">
    <div class="columns small-12">
      <ul class="medium-font">
        <li>{{payment['shipping-method']}}</li>
      </ul>
    </div>
  </div>
  <div class="row title">
    <h6 class="small-6 columns">
      PAYMENT METHOD
    </h6>
  </div>
  <div class="row" ng-repeat="availablePaymentMethod in payment['available-payment-methods']">
    <div class="small-3 columns">
      <label class="right" for="payment-method-{{availablePaymentMethod.id}}">
        {{availablePaymentMethod.name}}
      </label>
    </div>
    <div class="small-9 columns">
      <input ng-model="payment['payment-method-id']" ng-value="availablePaymentMethod.id" type="radio"
             name="payment-method" id="payment-method-{{availablePaymentMethod.id}}"
             ng-change="paymentMethodChange(availablePaymentMethod.id)"/>
    </div>
  </div>
  <div ng-show="payment['is-creditcard']">
    <div class="row title">
      <h6 class="small-6 columns">
        PAYMENT INFORMATION
        <img src="images/cards.png" alt="Cards"/>
      </h6>
    </div>
    <div class="row">
      <div class="small-3 columns">
        <label class="right inline required" for="card-number">Card Number</label>
      </div>
      <div class="small-5 end columns">
        <input type="text" ng-model="creditcard.number" name="card-number" ng-required="payment['is-creditcard']"
               id="card-number"/>
        <small ng-show="submitted && step['card-number'].$error.required" class="error">
          This field is required.
        </small>
      </div>
    </div>
    <div class="row credit-card-expiration">
      <div class="small-3 columns">
        <label class="right inline required" for="expiration-month">Expiration</label>
      </div>
      <div class="columns small-3 end">
        <div class="row">
          <div class="small-4 columns">
            <select id="expiration-month" name="expiration-month" ng-required="payment['is-creditcard']"
                    ng-model="creditcard['expiration-month']"
                    ng-options="month for month in expirationMonths">
            </select>
          </div>
          <div class="columns small-8">
            <select id="expiration-year" name="expiration-year" ng-required="payment['is-creditcard']"
                    ng-model="creditcard['expiration-year']"
                    ng-options="year for year in expirationYears">
            </select>
          </div>
        </div>
        <div class="row">
          <div class="columns small-12">
            <small ng-show="submitted && (step['expiration-year'].$error.required || step['expiration-month'].$error.required)" class="error">
              This field is required.
            </small>
          </div>
        </div>
      </div>


    </div>
    <div class="row">
      <div class="small-3 columns">
        <label class="right inline required" for="cvv">Card Code</label>
      </div>
      <div class="small-3 columns end">
        <input type="text" id="cvv" ng-required="payment['is-creditcard']" name="cvv" ng-model="creditcard.cvv"/>
        <small ng-show="submitted && step['cvv'].$error.required" class="error">
          This field is required.
        </small>
      </div>
    </div>
  </div>

  <div data-is-billing-address-validated="isBillingAddressValidated" data-home-address-source="address.homeAddress"
       data-billing-address="payment.billingAddress" data-submitted="submitted" data-form="step"></div>

  <div class="row">
    <div class="columns small-9 small-offset-3">
      <button ng-click="submit()">SUBMIT</button>
    </div>
  </div>
</form>
